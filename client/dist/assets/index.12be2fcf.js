import{S as e,w as t,R as a,D as r,a as n,L as o,B as c,b as s,c as l,i as m,d}from"./vendor.4c4fbbea.js";const u=e.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",e.stopTimer),t.addEventListener("mouseleave",e.resumeTimer)}}),i=(e,t)=>{u.fire({icon:e,title:t})};var p=t((function(e){const t=a.createRef(),n=a.createRef();return a.createElement("div",{className:"card"},a.createElement("div",{className:"cardHeader"},"Login"),a.createElement("div",{className:"cardBody"},a.createElement("div",{className:"inputGroup"},a.createElement("label",{htmlFor:"player"},"Your name"),a.createElement("input",{type:"text",name:"text",id:"player",autoFocus:!0,placeholder:" ercode",ref:t})),a.createElement("div",{className:"inputGroup"},a.createElement("label",{htmlFor:"password"},"Password"),a.createElement("input",{type:"password",name:"password",id:"password",placeholder:" your password",ref:n})),a.createElement("button",{onClick:()=>{const a=t.current.value,o=n.current.value;r.post("/login",{name:a,password:o}).then((t=>{i("success",t.data.message),console.log(t.data),t.data.token&&(localStorage.setItem("Auth_token",t.data.token),e.history.push("/dashboard"),e.setupSocket())})).catch((e=>{i("error",e.res.data.message)}))}},"Sign in")))}));function E(e){const t=a.createRef(),n=a.createRef();return a.createElement("div",{className:"card"},a.createElement("div",{className:"cardHeader"},"Register"),a.createElement("div",{className:"cardBody"},a.createElement("div",{className:"inputGroup"},a.createElement("label",{htmlFor:"player"},"Your name"),a.createElement("input",{type:"text",name:"text",id:"player",autoFocus:!0,placeholder:" ercode",ref:t})),a.createElement("div",{className:"inputGroup"},a.createElement("label",{htmlFor:"password"},"Password"),a.createElement("input",{type:"password",name:"password",id:"password",placeholder:" your password",ref:n})),a.createElement("button",{onClick:()=>{const a=t.current.value,o=n.current.value;r.post("/register",{name:a,password:o}).then((t=>{i("success",t.data.message),console.log(t.data),e.history.push("/login")})).catch((e=>{i("error",e.res.data.message)}))}},"Sign up")))}function h(e){const[t,c]=n.exports.useState([]),s=async()=>{try{const{data:e}=await r.get("/rooms",{headers:{auth:localStorage.getItem("Auth_token")}});c(e)}catch(e){setTimeout(s,3e3)}};return n.exports.useEffect((()=>{s()}),[]),a.createElement("div",{className:"card"},a.createElement("div",{className:"cardHeader"},"Lobby"),a.createElement("div",{className:"cardBody"},a.createElement("div",{className:"inputGroup"},a.createElement("label",{htmlFor:"gameroom"},"Room name"),a.createElement("input",{type:"text",name:"gameroom",id:"gameroom",autoFocus:!0,placeholder:" secret room"})),a.createElement("button",null,"Create"),a.createElement("div",{className:"gamerooms"},t.map((e=>a.createElement("div",{key:e._id,className:"gameroom"},a.createElement("div",null,e.name),a.createElement(o,{to:"/room/"+e._id},a.createElement("div",{className:"join"},"Join"))))))))}function g(e){return a.useEffect((()=>{localStorage.getItem("Auth_token")?e.history.push("/dashboard"):e.history.push("/login")}),[]),a.createElement("div",null,"Homepage")}var v=t((function({match:e,socket:t}){return e.params.id,a.createElement("div",null,"Okey!")}));function f(){const[e,t]=n.exports.useState(0),[r,o]=n.exports.useState("");return a.createElement("div",{className:"App"},a.createElement("header",{className:"App-header"},a.createElement("p",null,"Hi, ",r),a.createElement("p",null,a.createElement("button",{onClick:()=>t((e=>e+1))},"test: ",e)),a.createElement("p",null,a.createElement("a",{className:"App-link",href:"https://vitejs.dev/guide/features.html",target:"_blank",rel:"noopener noreferrer"},"Vite"))))}function k(){const[e,t]=n.exports.useState(null),r=()=>{if(localStorage.getItem("Auth_token")&&!e){const e=m("https://okey.erkuttekoglu.com",{auth:{token:localStorage.getItem("Auth_token")}});e.on("disconnect",(()=>{t(null),setTimeout(r,3e3),i("error","Socket disconnected!")})),e.on("connect",(()=>{i("success","Socket connected!")})),t(e)}};return n.exports.useEffect((()=>{r()}),[]),a.createElement(c,null,a.createElement(s,null,a.createElement(l,{path:"/",component:g,exact:!0}),a.createElement(l,{path:"/login",render:()=>a.createElement(p,{setupSocket:r}),exact:!0}),a.createElement(l,{path:"/register",component:E,exact:!0}),a.createElement(l,{path:"/dashboard",render:()=>a.createElement(h,{socket:e}),exact:!0}),a.createElement(l,{path:"/test",component:f,exact:!0}),a.createElement(l,{path:"/room/:id",render:()=>a.createElement(v,{socket:e}),exact:!0})))}d.render(a.createElement(a.StrictMode,null,a.createElement(k,null)),document.getElementById("root"));
